{
  "$schema": "https://json.schemastore.org/template",
  "author": "miguelguedelha",
  "classifications": [
    "AspNetCore",
    "Web",
    "Cloud",
    "Solution",
    "Umbraco",
    "MVC",
    "API"
  ],
  "name": "Umbraco Website Baseline",
  "defaultName": "UmbracoSite",
  "description": "A template containing a baseline multi-project solution for scaffolding Umbraco 13 Sites, allowing for both MVC or Content Delivery Api based sites. Taking advantage of .NET Aspire for local development. It comes packed with multiple pre-installed packages commonly used or that prove useful in Umbraco projects, such as Hangfire, Audit Log Viewer, etc.",
  "guids": [
    // sln file GUIDs
    "F7F86B2C-4CD5-4020-B769-F9CDBF9B6A8E",
    "8F4A0DA8-6159-483D-8473-C2FE7C0A3036",
    "5C295B2B-24DC-4ABC-94E6-436CEDDE63BA",
    "D63F7486-C79F-446D-9644-40517E6643A1",
    "15F7647C-BDB3-4A5C-89DF-B9667C248320",
    "042541DD-116C-4BD5-A518-BDB8D4B5EC3D",
    "0396B6A2-F77A-4A7F-B379-85A57883F172",
    // User secrets GUIDs
    "24863493-bd25-4d22-b72f-fcd8e940b823",
    "173d0813-486c-4b95-9e03-a4974ba30d3d"
  ],
  "identity": "MiguelGuedelha.Umbraco.Baseline.13",
  "preferNameDirectory": true,
  "primaryOutputs": [
    {
      "path": "UmbracoTemplate.sln"
    }
  ],
  "shortName": "umbracobaseline-13",
  "sourceName": "UmbracoTemplate",
  "sources": [
    {
      "source": "./",
      "target": "./",
      "exclude": [
        "**/[Bb]in/**",
        "**/[Oo]bj/**",
        ".template.config/**/*",
        "**/*.filelist",
        "**/*.user",
        "**/appsettings-schema*",
        "**/*.lock.json",
        "**/*.lock.yaml",
        "**/App_Plugins/**",
        "**/[Uu]mbraco/**",
        "**/uSync/**",
        "**/*.bundle.js*",
        "**/node_modules/**"
      ],
      "modifiers": [
        {
          "condition": "(UseNodeReactFrontend)",
          "exclude": [
            "src/frontends/astro-frontend/**",
            "src/frontends/vite-react-frontend/**",
            "src/UmbracoTemplate.AppHost/Extensions/DistributedApplicationBuilderPnpmExtensions.cs"
          ],
          "rename": {
            "src/frontends/nodereact-frontend/": "src/frontend/"
          }
        },
        {
          "condition": "(UseAstroFrontend)",
          "exclude": [
            "src/frontends/nodereact-frontend/**",
            "src/frontends/vite-react-frontend/**",
            "src/UmbracoTemplate.Web/Views/**"
          ],
          "rename": {
            "src/frontends/astro-frontend/": "src/frontend/"
          }
        },
        {
          "condition": "(UseReactFrontend)",
          "exclude": [
            "src/frontends/nodereact-frontend/**",
            "src/frontends/astro-frontend/**"
          ],
          "rename": {
            "src/frontends/vite-react-frontend/": "src/frontend/"
          }
        },
        {
          "condition": "(UseNoFrontend)",
          "exclude": [
            "src/frontends/**",
            "src/UmbracoTemplate.AppHost/Extensions/DistributedApplicationBuilderPnpmExtensions.cs"
          ]
        },
        {
          "condition": "(!LoadBalancing)",
          "exclude": [
            "src/UmbracoTemplate.Web/Shared/LoadBalancing/LoadBalancingComposer.cs"
          ]
        },
        {
          "condition": "(!Caching)",
          "exclude": [
            "src/UmbracoTemplate.Web/Shared/Caching/**"
          ]
        }
      ]
    }
  ],
  "symbols": {
    "ContentDeliveryApi": {
      "type": "parameter",
      "description": "Enable the Umbraco Content Delivery Api",
      "datatype": "bool",
      "defaultValue": "true"
    },
    "Caching": {
      "type": "parameter",
      "description": "Enable the Umbraco Content Delivery Api",
      "datatype": "bool",
      "defaultValue": "true"
    },
    "LoadBalancing": {
      "type": "parameter",
      "description": "Enable support for load balanced environments",
      "datatype": "bool",
      "defaultValue": "false"
    },
    "Frontend": {
      "type": "parameter",
      "description": "If a frontend framework should be enabled, and which one",
      "datatype": "choice",
      "choices": [
        {
          "choice": "none",
          "description": "No frontend enabled"
        },
        {
          "choice": "astro",
          "description": "Use a Astro project as the frontend. Only takes effect if ContentDeliveryApi is true"
        },
        {
          "choice": "node-react",
          "description": "CURRENTLY IS NON FUNCTIONAL. Use a NodeReact project as the frontend"
        },
        {
          "choice": "vite-react",
          "description": "Use a Vite (React) project that can be built and registered in the Razor/MVC views for richer client-side interactivity"
        }
      ],
      "defaultValue": "none"
    },
    "UseAstroFrontend": {
      "type": "computed",
      "value": "(Frontend == \"astro\" && ContentDeliveryApi)"
    },
    "UseNodeReactFrontend": {
      "type": "computed",
      "value": "(Frontend == \"node-react\")"
    },
    "UseViteReactFrontend": {
      "type": "computed",
      "value": "(Frontend == \"vite-react\")"
    },
    "UseNoFrontend": {
      "type": "computed",
      "value": "(Frontend == \"none\" || ((Frontend == \"astro\" && !ContentDeliveryApi)))"
    }
  },
  "tags": {
    "language": "C#",
    "type": "solution"
  },
  "postActions": [
    {
      "id": "restore",
      "description": "Restore NuGet packages required by this project.",
      "manualInstructions": [
        {
          "text": "Run 'dotnet restore'"
        }
      ],
      "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
      "continueOnError": true
    }
  ]
}